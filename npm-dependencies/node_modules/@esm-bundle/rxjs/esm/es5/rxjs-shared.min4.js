/* rxjs@6.6.3 */
import{_ as t,e,S as i}from"./rxjs-shared.min.js";import{A as s,a as n,N as r,O as o,g as h,S as u}from"./rxjs-shared.min3.js";var c=function(e){function i(t,i){var s=e.call(this,t,i)||this;return s.scheduler=t,s.work=i,s}return t(i,e),i.prototype.schedule=function(t,i){return void 0===i&&(i=0),i>0?e.prototype.schedule.call(this,t,i):(this.delay=i,this.state=t,this.scheduler.flush(this),this)},i.prototype.execute=function(t,i){return i>0||this.closed?e.prototype.execute.call(this,t,i):this._execute(t,i)},i.prototype.requestAsyncId=function(t,i,s){return void 0===s&&(s=0),null!==s&&s>0||null===s&&this.delay>0?e.prototype.requestAsyncId.call(this,t,i,s):t.flush(this)},i}(s),a=new(function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return t(i,e),i}(n))(c),l=a;function f(t,e){return void 0===e&&(e=0),function(i){return i.lift(new d(t,e))}}var d=function(){function t(t,e){void 0===e&&(e=0),this.scheduler=t,this.delay=e}return t.prototype.call=function(t,e){return e.subscribe(new p(t,this.scheduler,this.delay))},t}(),p=function(e){function i(t,i,s){void 0===s&&(s=0);var n=e.call(this,t)||this;return n.scheduler=i,n.delay=s,n}return t(i,e),i.dispatch=function(t){var e=t.notification,i=t.destination;e.observe(i),this.unsubscribe()},i.prototype.scheduleMessage=function(t){this.destination.add(this.scheduler.schedule(i.dispatch,this.delay,new v(t,this.destination)))},i.prototype._next=function(t){this.scheduleMessage(r.createNext(t))},i.prototype._error=function(t){this.scheduleMessage(r.createError(t)),this.unsubscribe()},i.prototype._complete=function(){this.scheduleMessage(r.createComplete()),this.unsubscribe()},i}(e),v=function(){return function(t,e){this.notification=t,this.destination=e}}(),_=function(e){function s(t,i,s){void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===i&&(i=Number.POSITIVE_INFINITY);var n=e.call(this)||this;return n.scheduler=s,n._events=[],n._infiniteTimeWindow=!1,n._bufferSize=t<1?1:t,n._windowTime=i<1?1:i,i===Number.POSITIVE_INFINITY?(n._infiniteTimeWindow=!0,n.next=n.nextInfiniteTimeWindow):n.next=n.nextTimeWindow,n}return t(s,e),s.prototype.nextInfiniteTimeWindow=function(t){if(!this.isStopped){var i=this._events;i.push(t),i.length>this._bufferSize&&i.shift()}e.prototype.next.call(this,t)},s.prototype.nextTimeWindow=function(t){this.isStopped||(this._events.push(new m(this._getNow(),t)),this._trimBufferThenGetEvents()),e.prototype.next.call(this,t)},s.prototype._subscribe=function(t){var e,s=this._infiniteTimeWindow,n=s?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,u=n.length;if(this.closed)throw new o;if(this.isStopped||this.hasError?e=i.EMPTY:(this.observers.push(t),e=new h(this,t)),r&&t.add(t=new p(t,r)),s)for(var c=0;c<u&&!t.closed;c++)t.next(n[c]);else for(c=0;c<u&&!t.closed;c++)t.next(n[c].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),e},s.prototype._getNow=function(){return(this.scheduler||l).now()},s.prototype._trimBufferThenGetEvents=function(){for(var t=this._getNow(),e=this._bufferSize,i=this._windowTime,s=this._events,n=s.length,r=0;r<n&&!(t-s[r].time<i);)r++;return n>e&&(r=Math.max(r,n-e)),r>0&&s.splice(0,r),s},s}(u),m=function(){return function(t,e){this.time=t,this.value=e}}();export{_ as R,a,f as o,l as q};
