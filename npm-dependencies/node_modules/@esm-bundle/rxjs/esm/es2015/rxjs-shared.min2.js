/* rxjs@6.6.3 */
import{e as t,O as e,S as s,i as r,d as i}from"./rxjs-shared.min.js";import{d as n,S as o,O as c,A as u,a as h,i as l,f as a,o as p,e as b}from"./rxjs-shared.min3.js";import{m as d}from"./rxjs-shared.min7.js";import{s as f,f as m,i as x}from"./rxjs-shared.min6.js";function _(){return function(t){return t.lift(new v(t))}}class v{constructor(t){this.connectable=t}call(t,e){const{connectable:s}=this;s._refCount++;const r=new y(t,s),i=e.subscribe(r);return r.closed||(r.connection=s.connect()),i}}class y extends t{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:s}=this,r=t._connection;this.connection=null,!r||s&&r!==s||r.unsubscribe()}}class g extends e{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new s,t.add(this.source.subscribe(new w(this.getSubject(),this))),t.closed&&(this._connection=null,t=s.EMPTY)),t}refCount(){return _()(this)}}const S=(()=>{const t=g.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class w extends n{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function C(t,e,s,r){return i=>i.lift(new I(t,e,s,r))}class I{constructor(t,e,s,r){this.keySelector=t,this.elementSelector=e,this.durationSelector=s,this.subjectSelector=r}call(t,e){return e.subscribe(new j(t,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))}}class j extends t{constructor(t,e,s,r,i){super(t),this.keySelector=e,this.elementSelector=s,this.durationSelector=r,this.subjectSelector=i,this.groups=null,this.attemptedToUnsubscribe=!1,this.count=0}_next(t){let e;try{e=this.keySelector(t)}catch(t){return void this.error(t)}this._group(t,e)}_group(t,e){let s=this.groups;s||(s=this.groups=new Map);let r,i=s.get(e);if(this.elementSelector)try{r=this.elementSelector(t)}catch(t){this.error(t)}else r=t;if(!i){i=this.subjectSelector?this.subjectSelector():new o,s.set(e,i);const t=new E(e,i,this);if(this.destination.next(t),this.durationSelector){let t;try{t=this.durationSelector(new E(e,i))}catch(t){return void this.error(t)}this.add(t.subscribe(new N(e,i,this)))}}i.closed||i.next(r)}_error(t){const e=this.groups;e&&(e.forEach((e,s)=>{e.error(t)}),e.clear()),this.destination.error(t)}_complete(){const t=this.groups;t&&(t.forEach((t,e)=>{t.complete()}),t.clear()),this.destination.complete()}removeGroup(t){this.groups.delete(t)}unsubscribe(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&super.unsubscribe())}}class N extends t{constructor(t,e,s){super(e),this.key=t,this.group=e,this.parent=s}_next(t){this.complete()}_unsubscribe(){const{parent:t,key:e}=this;this.key=this.parent=null,t&&t.removeGroup(e)}}class E extends e{constructor(t,e,s){super(),this.key=t,this.groupSubject=e,this.refCountSubscription=s}_subscribe(t){const e=new s,{refCountSubscription:r,groupSubject:i}=this;return r&&!r.closed&&e.add(new T(r)),e.add(i.subscribe(t)),e}}class T extends s{constructor(t){super(),this.parent=t,t.count++}unsubscribe(){const t=this.parent;t.closed||this.closed||(super.unsubscribe(),t.count-=1,0===t.count&&t.attemptedToUnsubscribe&&t.unsubscribe())}}class O extends o{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new c;return this._value}next(t){super.next(this._value=t)}}class V extends o{constructor(){super(...arguments),this.value=null,this.hasNext=!1,this.hasCompleted=!1}_subscribe(t){return this.hasError?(t.error(this.thrownError),s.EMPTY):this.hasCompleted&&this.hasNext?(t.next(this.value),t.complete(),s.EMPTY):super._subscribe(t)}next(t){this.hasCompleted||(this.value=t,this.hasNext=!0)}error(t){this.hasCompleted||super.error(t)}complete(){this.hasCompleted=!0,this.hasNext&&super.next(this.value),super.complete()}}let k=1;const A=Promise.resolve(),F={};function R(t){return t in F&&(delete F[t],!0)}const P={setImmediate(t){const e=k++;return F[e]=!0,A.then(()=>R(e)&&t()),e},clearImmediate(t){R(t)}};const Y=new class extends h{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let s,r=-1,i=e.length;t=t||e.shift();do{if(s=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,s){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw s}}}(class extends u{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,s=0){return null!==s&&s>0?super.requestAsyncId(t,e,s):(t.actions.push(this),t.scheduled||(t.scheduled=P.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,s=0){if(null!==s&&s>0||null===s&&this.delay>0)return super.recycleAsyncId(t,e,s);0===t.actions.length&&(P.clearImmediate(e),t.scheduled=void 0)}}),U=Y,q=new h(u),M=q;function G(){}const B=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})(),z=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})(),D=(()=>{function t(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return t.prototype=Object.create(Error.prototype),t})();class Z extends t{notifyNext(t,e,s,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class H extends t{constructor(t,e,s){super(),this.parent=t,this.outerValue=e,this.outerIndex=s,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}function J(t,s,r,i,n=new H(t,r,i)){if(!n.closed)return s instanceof e?s.subscribe(n):f(s)(n)}const K={};function L(...t){let e=void 0,s=void 0;return l(t[t.length-1])&&(s=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&r(t[0])&&(t=t[0]),a(t,s).lift(new Q(e))}class Q{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new W(t,this.resultSelector))}}class W extends Z{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(K),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let s=0;s<e;s++){const e=t[s];this.add(J(this,e,void 0,s))}}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,s){const r=this.values,i=r[s],n=this.toRespond?i===K?--this.toRespond:this.toRespond:0;r[s]=e,0===n&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)}}class X extends t{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class $ extends t{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function tt(t,s){if(!s.closed)return t instanceof e?t.subscribe(s):f(t)(s)}function et(t,e,s=Number.POSITIVE_INFINITY){return"function"==typeof e?r=>r.pipe(et((s,r)=>m(t(s,r)).pipe(d((t,i)=>e(s,t,r,i))),s)):("number"==typeof e&&(s=e),e=>e.lift(new st(t,s)))}class st{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new rt(t,this.project,this.concurrent))}}class rt extends ${constructor(t,e,s=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=s,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const s=this.index++;try{e=this.project(t,s)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(e)}_innerSub(t){const e=new X(this),s=this.destination;s.add(e);const r=tt(t,e);r!==e&&s.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}const it=et;function nt(t=Number.POSITIVE_INFINITY){return et(i,t)}function ot(){return nt(1)}function ct(...t){return ot()(p(...t))}function ut(t){return new e(e=>{let s;try{s=t()}catch(t){return void e.error(t)}return(s?m(s):b()).subscribe(e)})}function ht(t){return!r(t)&&t-parseFloat(t)+1>=0}function lt(...t){let s=Number.POSITIVE_INFINITY,r=null,i=t[t.length-1];return l(i)?(r=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(s=t.pop())):"number"==typeof i&&(s=t.pop()),null===r&&1===t.length&&t[0]instanceof e?t[0]:nt(s)(a(t,r))}function at(t,e){function s(){return!s.pred.apply(s.thisArg,arguments)}return s.pred=t,s.thisArg=e,s}function pt(t,e){return function(s){return s.lift(new bt(t,e))}}class bt{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new dt(t,this.predicate,this.thisArg))}}class dt extends t{constructor(t,e,s){super(t),this.predicate=e,this.thisArg=s,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}e&&this.destination.next(t)}}function ft(...t){if(1===t.length){if(!r(t[0]))return t[0];t=t[0]}return a(t,void 0).lift(new mt)}class mt{call(t,e){return e.subscribe(new xt(t))}}class xt extends Z{constructor(t){super(t),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}_next(t){this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(let s=0;s<e&&!this.hasFirst;s++){const e=J(this,t[s],void 0,s);this.subscriptions&&this.subscriptions.push(e),this.add(e)}this.observables=null}}notifyNext(t,e,s){if(!this.hasFirst){this.hasFirst=!0;for(let t=0;t<this.subscriptions.length;t++)if(t!==s){let e=this.subscriptions[t];e.unsubscribe(),this.remove(e)}this.subscriptions=null}this.destination.next(e)}}function _t(t=0,s,r){let i=-1;return ht(s)?i=Number(s)<1?1:Number(s):l(s)&&(r=s),l(r)||(r=M),new e(e=>{const s=ht(t)?t:+t-r.now();return r.schedule(vt,s,{index:0,period:i,subscriber:e})})}function vt(t){const{index:e,period:s,subscriber:r}=t;if(r.next(e),!r.closed){if(-1===s)return r.complete();t.index=e+1,this.schedule(t,s)}}function yt(...t){const e=t[t.length-1];return"function"==typeof e&&t.pop(),a(t,void 0).lift(new gt(e))}class gt{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new St(t,this.resultSelector))}}class St extends t{constructor(t,e,s=Object.create(null)){super(t),this.resultSelector=e,this.iterators=[],this.active=0,this.resultSelector="function"==typeof e?e:void 0}_next(t){const e=this.iterators;r(t)?e.push(new Ct(t)):"function"==typeof t[x]?e.push(new wt(t[x]())):e.push(new It(this.destination,this,t))}_complete(){const t=this.iterators,e=t.length;if(this.unsubscribe(),0!==e){this.active=e;for(let s=0;s<e;s++){let e=t[s];if(e.stillUnsubscribed){this.destination.add(e.subscribe())}else this.active--}}else this.destination.complete()}notifyInactive(){this.active--,0===this.active&&this.destination.complete()}checkIterators(){const t=this.iterators,e=t.length,s=this.destination;for(let s=0;s<e;s++){let e=t[s];if("function"==typeof e.hasValue&&!e.hasValue())return}let r=!1;const i=[];for(let n=0;n<e;n++){let e=t[n],o=e.next();if(e.hasCompleted()&&(r=!0),o.done)return void s.complete();i.push(o.value)}this.resultSelector?this._tryresultSelector(i):s.next(i),r&&s.complete()}_tryresultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)}}class wt{constructor(t){this.iterator=t,this.nextResult=t.next()}hasValue(){return!0}next(){const t=this.nextResult;return this.nextResult=this.iterator.next(),t}hasCompleted(){const t=this.nextResult;return Boolean(t&&t.done)}}class Ct{constructor(t){this.array=t,this.index=0,this.length=0,this.length=t.length}[x](){return this}next(t){const e=this.index++,s=this.array;return e<this.length?{value:s[e],done:!1}:{value:null,done:!0}}hasValue(){return this.array.length>this.index}hasCompleted(){return this.array.length===this.index}}class It extends ${constructor(t,e,s){super(t),this.parent=e,this.observable=s,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}[x](){return this}next(){const t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}}hasValue(){return this.buffer.length>0}hasCompleted(){return 0===this.buffer.length&&this.isComplete}notifyComplete(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}notifyNext(t){this.buffer.push(t),this.parent.checkIterators()}subscribe(){return tt(this.observable,new X(this))}}export{V as A,O as B,g as C,it as D,z as E,E as G,Z as O,$ as S,D as T,gt as Z,M as a,at as b,U as c,ut as d,Y as e,pt as f,q as g,B as h,ht as i,L as j,ct as k,tt as l,lt as m,G as n,X as o,Q as p,et as q,ft as r,J as s,_t as t,S as u,_ as v,ot as w,C as x,nt as y,yt as z};
